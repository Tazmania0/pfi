[
{
  "doctype": "Print Format",
  "name": "Job Card A9 - pfi",
  "doc_type": "Job Card",
  "module": "Pfi",
  "is_standard": "No",
  "standard": "No",
  "custom_format": 1,
  "print_format_type": "Jinja",
  "disabled": 0,
  "html": "<head>\n<meta name=\"wkhtmltopdf-disable-smart-shrinking\" content=\"true\"/>\n<meta name=\"pdfkit-page-size\" content=\"A9\"/>\n<meta name=\"pdfkit-page-width\" content=\"52mm\" />\n<meta name=\"pdfkit-page-height\" content=\"37mm\"/>\n</head>\n\n<!-- <meta name=\"wkhtmltopdf-page-size\" content=\"52mm 74mm\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-top\" content=\"0\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-bottom\" content=\"0\"/> -->\n<!--<meta name=\"wkhtmltopdf-margin-left\" content=\"0\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-right\" content=\"0\"/>-->\n\n<div class=\"print-format\">\n   <!-- <b>Kарта: {{ doc.name }}</b> -->\n    <p>Поръчка: {{ doc.work_order }}</p>\n    <p>Модел: {{ doc.production_item }}</p>\n  <!--  <p>Customer PO: {{ doc.customer_po }}</p> -->\n    <p>{{ \"Процес: %s\" % doc.operation}} / {{\"Брой: %d\" % doc.for_quantity}} </p>\n    <p> Оператор: \n        {% set employees = {} %}\n{% for log in doc.time_logs %}\n    {% if log.employee %}\n        {% set __ = employees.update({log.employee: 1}) %}\n    {% endif %}\n{% endfor %}\n\n{% if employees|length == 1 %}\n    {{ employees|list|first }}  {# Single employee #}\n{% elif employees|length > 1 %}\n    Група  {# Multiple employees #}\n{% else %}\n    .......................  {# No employees found #}\n{% endif %}\n     </P> <P>\n     Дата: {{doc.posting_date}} </P>\n       <!--<div class=\"print-format\" > -->\n      <p>  <img style=\"center\" src=\"{{generate_barcode(doc.name)}}\" alt=\"\" width=\"110%\" height=\"60mm\"   >\n   <!-- </div> --> </p>\n</div>\n <!--style=\"transfom-origin: bootom left; position: absolute; left:0\" -->  \n",
  "css":" \n/* Force A8 dimensions (52x74mm) with zero margins */ \n@page { \n    size: 52mm, 37mm !important; \n    margin: 0mm !important; \n    padding: 0mm !important; \n   \n    \n}\n.barcode {\n    width: 50mm !important;\n    height: 37mm !important; \n    margin: 0mm !important;\n    padding: 1mm !important;\n    \n    transform: scale(1); /* Disable auto-scaling */\n    font-size: 9pt; \n    font-family: 'Open Sans', sans-serif; \n \n        /* Prevent overflow */\n      /*  overflow: hidden !important;*/\n/* Include border/padding in dimensions */ \nfont-size: 8pt; \nfont-family: 'Open Sans', sans-serif; \nmargin-left:1mm;\nmargin-top:1mm; \nmargin-right:1mm;\nmargin-bottom:1mm\n    \n} \n\n\n.print-format {\n    width: 51mm !important;\n    height: 36mm !important; \n    margin: 0.5mm !important;\n    padding: 0mm !important;\n  /*  transform-origin: top left; */\n    transform: scale(1); /* Disable auto-scaling */\n     \n    font-family: 'Open Sans', sans-serif; \n \n        /* Prevent overflow */\n        overflow: hidden !important;\n/* Include border/padding in dimensions */ \n/*position: absolute;*/\nfont-size: 9pt; \nfont-family: 'Open Sans', sans-serif; \nmargin-left:0mm;\nmargin-top:0mm; \nmargin-right:0mm;\nmargin-bottom:0mm;\nline-height: 95% !important;\n/*border: 1px solid red;*/    \n} \n\n\n\n "
},
{
  "doctype": "Print Format",
  "name": "Job Card A9 - 1 - pfi",
  "doc_type": "Job Card",
  "module": "Pfi",
  "is_standard": "No",
  "standard": "No",
  "custom_format": 1,
  "print_format_type": "Jinja",
  "disabled": 0,
  "html": "<head>\n<meta name=\"wkhtmltopdf-disable-smart-shrinking\" content=\"true\"/>\n<meta name=\"pdfkit-page-size\" content=\"A9\"/>\n<meta name=\"pdfkit-page-width\" content=\"52mm\" />\n<meta name=\"pdfkit-page-height\" content=\"37mm\"/>\n</head>\n\n<!-- <meta name=\"wkhtmltopdf-page-size\" content=\"52mm 74mm\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-top\" content=\"0\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-bottom\" content=\"0\"/> -->\n<!--<meta name=\"wkhtmltopdf-margin-left\" content=\"0\"/> -->\n<!-- <meta name=\"wkhtmltopdf-margin-right\" content=\"0\"/>-->\n\n<!-- Fetch item variant attributes-->\n\n{% set work_order = frappe.get_doc(\"Work Order\", doc.work_order) if doc.work_order else None %}\n{% if work_order %}\n    {% set production_item = frappe.get_doc(\"Item\", work_order.production_item) %}\n    {% set template_item = frappe.get_doc(\"Item\", production_item.variant_of) if production_item.variant_of else None %}\n{% endif %}\n\n<div class=\"print-format\">\n   <!-- <b>Kарта: {{ doc.name }}</b> -->\n    <p>Поръчка: {{ doc.work_order }}</p>\n    \n    <p>Модел: \n    {% if template_item %}\n        {{ template_item.name or template_item.item_name }}\n    {% endif %}\n\n    {# 1. Try Variant Attributes from Work Order's Item #}\n    {% if work_order and production_item %}\n        {% set variant_attributes = frappe.db.sql(\"\"\"\n            SELECT \n                iv.attribute AS attribute,\n                iv.attribute_value AS attribute_value,\n                av.abbr AS abbr\n            FROM \n                `tabItem Variant Attribute` iv\n            INNER JOIN \n                `tabItem Attribute Value` av\n                ON iv.attribute = av.parent\n                AND iv.attribute_value = av.attribute_value\n            WHERE \n                iv.parent = %(variant)s\n            ORDER BY \n                iv.idx\n        \"\"\", {\"variant\": work_order.production_item}, as_dict=1) %}\n\n        {% if variant_attributes %}\n            {% for attr in variant_attributes %}\n                / {{ attr.abbr }}\n            {% endfor %}\n        {# 2. Fallback to Template Attributes #}\n        {% elif template_item and template_item.attributes %}\n            {% for attr in template_item.attributes %}\n                / {{ attr.default_value or attr.abbr }}\n            {% endfor %}\n        {# 3. Parse from Work Order Item Code #}\n        {% else %}\n            {% set parts = work_order.production_item.split(\"-\") %}\n            / {{ parts[1] if parts|length > 1 else 'N/A' }}\n            / {{ parts[2] if parts|length > 2 else 'N/A' }}\n        {% endif %}\n    {% endif %}\n</p>\n    \n<!--<p>Модел: {{ doc.production_item }}</p> -->\n<!--  <p>Customer PO: {{ doc.customer_po }}</p> -->\n    <p>{{ \"Процес: %s\" % doc.operation}} / {{\"Брой: %d\" % doc.for_quantity}} </p>\n    <p> Оператор: \n        {% set employees = {} %}\n{% for log in doc.time_logs %}\n    {% if log.employee %}\n        {% set __ = employees.update({log.employee: 1}) %}\n    {% endif %}\n{% endfor %}\n\n{% if employees|length == 1 %}\n    {{ employees|list|first }}  {# Single employee #}\n{% elif employees|length > 1 %}\n    Група  {# Multiple employees #}\n{% else %}\n    .......................  {# No employees found #}\n{% endif %}\n     </P> <P>\n     Дата: {{doc.posting_date}} </P>\n       <!--<div class=\"print-format\" > -->\n      <p>  <img style=\"center\" src=\"{{generate_barcode(doc.name)}}\" alt=\"\" width=\"110%\" height=\"60mm\"   >\n   <!-- </div> --> </p>\n</div>\n <!--style=\"transfom-origin: bootom left; position: absolute; left:0\" -->  \n \n",
  "css":"\n\n\n/* Force A8 dimensions (52x74mm) with zero margins */ \n@page { \n    size: 52mm, 37mm !important; \n    margin: 0mm !important; \n    padding: 0mm !important; \n   \n    \n}\n.barcode {\n    width: 50mm !important;\n    height: 37mm !important; \n    margin: 0mm !important;\n    padding: 1mm !important;\n    \n    transform: scale(1); /* Disable auto-scaling */\n    font-size: 9pt; \n    font-family: 'Open Sans', sans-serif; \n \n        /* Prevent overflow */\n      /*  overflow: hidden !important;*/\n/* Include border/padding in dimensions */ \nfont-size: 8pt; \nfont-family: 'Open Sans', sans-serif; \nmargin-left:1mm;\nmargin-top:1mm; \nmargin-right:1mm;\nmargin-bottom:1mm\n    \n} \n\n\n.print-format {\n    width: 51mm !important;\n    height: 36mm !important; \n    margin: 0.5mm !important;\n    padding: 0mm !important;\n  /*  transform-origin: top left; */\n    transform: scale(1); /* Disable auto-scaling */\n     \n    font-family: 'Open Sans', sans-serif; \n \n        /* Prevent overflow */\n        overflow: hidden !important;\n/* Include border/padding in dimensions */ \n/*position: absolute;*/\nfont-size: 9pt; \nfont-family: 'Open Sans', sans-serif; \nmargin-left:0mm;\nmargin-top:0mm; \nmargin-right:0mm;\nmargin-bottom:0mm;\nline-height: 95% !important;\n/*border: 1px solid red;*/    \n} \n\n\n\n "
}
]